# Technical Details

## Primary Dependencies

 - node: v18.12.1
 - ejs: v3.1.9
 - express: v4.18.2
 - express-session: v1.17.3
 - firebase-admin: v11.7.0

## Environment Details

- Live Deployment: https://hiv-management.herokuapp.com
- Database URL: https://hiv-management-db-default-rtdb.firebaseio.com/
- Static Site Directory: /views
- View Engine: ejs
- Database Key: pass.json (made public for assignment purposes and ease of use)


## Instructions for Grading

1. Navigate to https://hiv-management.herokuapp.com (If there are any issues, move to the next section and deploy the application yourself)
2. Sign up as a new user
3. Login to application
4. Click on "View Appointments"
5. Create 2 appointments for any date and time you would like
6. Delete 1 or both appointments
7. Click "HIV Management" at the top to return to home
8. Click "View Exercise"
9. Add an activity
10. Click on the activity in the calendar to view details
11. Delete the activity and refresh the page to remove it from calendar
12. Return home
13. Click on "View Diet"
14. Add 2 meals for any date of your choosing
15. View the meals on that date in the calendar by clicking on the date
16. View your total calorie intake for the day
17. Delete a meal
18. Return home
19. Logout by clicking logout button on the right side of the screen

## Getting Started: Local Deployment

In order to deploy the application locally, follow these steps in your terminal/command prompt:

 1. clone the repository to you local machine -> `"git clone https://github.com/Vedant527/HIV-Management.git"`
 2. cd into the newly created directory -> `"cd HIV-Management/"`
 3. install project dependencies -> `"npm install"`
 4. start the application -> `"node app.js"`
 5. go to a web browser and type in `"http://localhost:3000"` (this may vary based on the port your instance is running on; verify the port number in the terminal where you ran node app.js)

## Getting Started: Heroku Deployment

We have already created a procfile to pass into heroku that deploys the application. In the event that our existing deployment is inaccessible, you may deploy the application publicly by following these steps in your terminal/command prompt:


 1. clone the repository to you local machine -> `"git clone https://github.com/Vedant527/HIV-Management.git"`
 2. cd into the newly created directory -> `"cd HIV-Management/"`
 3. install project dependencies -> `"npm install"`
 4. install heroku cli -> `"curl https://cliassets.heroku.com/install.sh | sh"`
 5. verify installation -> `heroku --version`
 6. login to heroku (this redirects you to a web browser) -> `heroku login`
 7. create heroku app, you can use any app name you like -> `heroku create {app-name}`
 8. deploy the application -> `git push heroku main`
 9. access your application in the browser by viewing the link in the terminal logs or running `heroku open`
 
## Getting Started: Generating a New Firebase Key

If there are any issues with the existing key (pass.json) you can create a new one in the Firebase UI to replace it. Our team's TA already has access to our Firebase, however any other TA/User will have to contact us to be added to the Firebase project.

1. login to Firebase
2. go to our application page: HIV-Management-db
3. click the settings gear next to project overview
4. select users and permissions
5. navigate to the service accounts tab
6. generate a new private key
7. rename the key to pass.json once it is downloaded, and replace the existing key in your cloned repo
8. continue deploying either locally or using heroku

## User Guide: Key Features

 - *Sign up:* Access the sign up page by visiting your localhost:PORT link or by following the link generated by your Heroku deployment. Here, you may enter an email, username, and password to create your account. Ensure that your email address is unused, otherwise you will be met with an error message. Note: Your password must be at least 6 characters long.
 - *Login:* Once you have successfully created an account on the sign up page, you will be redirected to the login page. Here, you may input the credentials you set to access your portal. Alternatively, you may click sign up again if you would like to create another account.

 - *User Dashboard:* The user dashboard is the center of the application where you will be able to see a description of the applicaion, informative articles for people suffering from HIV, be alerted of you soonest upcoming appointment, and/or access your appointments, exercise, and meal data. To access any of the latter three pages, click on their respective link to be transferred to that page. On this page, you may also logout with the button in the upper right hand corner.
 - *Appointments:* Here, you may view your past and upcoming appointments. To schedule an appointment, fill in the appointment type, time, and date fields and click the submit button. If you do not fill out any of the fields, you will be met with an error. Appointments are added to the table, with the most recent appointment date showing at the top. To exit the appointments page, click the top of the screen where it says HIV Management Portal.
 - *Exercise:* Once you have returned to your dashboard, enter the exercise page by clicking "view exercise." You may now view your exercise history by moving through the calendar. Click on a calendar entry to view the details of the activity. You can add more entries to the calendar by filling in the boxes on the right hand side of the page. Basic exercises are shown, such as running, walking, or treadmill. Ensure to fill out every entry to successfully create an activity. The calories burned from each activity are calculated and shown in the table, alongside a total calories burned that day.
 - *Diet:* On the diet page, you can add meals similarly to how you added exercises on the previous page. Ensure to fill out all values. You are provided a dropdown of common, healthy meals to choose from, and the calories for these entries will automatically be populated based on the serving size you input. Each meal is shown in the table alongside calorie count and total daily calorie intake.

## Architecture Overview: 

For a detailed architecture overview navigate to /documentation/design.md and /documentation/sprint-planning.md

 - *User Dashboard:* The user dashboard is the center of the application where you will be able to see informative articles for people suffering from HIV and/or access your appointments, exercise, and meal data. To access any of the latter three pages, click on their respective link to be transferred to that page. On this page, you may also logout with the button in the upper right hand corner.
 - *Appointments:* Here, you may view your past and upcoming appointments. To schedule an appointment, fill in the appointment type, time, and date fields and click the submit button. If you do not fill out the time field it will be left blank; however, if you do not fill out the date field you will be met with an error. To exit the appointments page, click the top of the screen where it says HIV Management Portal.
 - *Exercise:* Once you have returned to your dashboard, enter the exercise page by clicking "view exercise." You may now view your exercise history by moving through the calendar. Click on a calendar entry to view the details of the activity. You can add more entries to the calendar by filling in the boxes on the right hand side of the page. Ensure to fill out every entry to successfully create an activity.
 - *Diet:* On the diet page, you can add meals similarly to how you added exercises on the previous page. Ensure to fill out all values. You are provided a dropdown of common meals to choose from, and the calories for these entries will automatically be populated based on the serving size you input.



